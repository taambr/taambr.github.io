<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
	<title>VISUALIZING ENVELOPES</title>
	<!--
	Funky Shape
	Using Tone.js and p5.js
	example written by Seth Kranzler
	https://github.com/polyrhythmatic
	-->
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	<link rel="icon" type="image/png" sizes="174x174" href="./style/favicon.png">
	
  <!--
	<script type="text/javascript" src="../build/Tone.js"></script>
	<script type="text/javascript" src="./scripts/jquery.min.js"></script>
	<script type="text/javascript" src="./scripts/draggabilly.js"></script>
	<script type="text/javascript" src="./scripts/Interface.js"></script>
	<script type="text/javascript" src="./scripts/Logo.js"></script>
	<script type="text/javascript" src="./scripts/p5.js"></script>
  -->
  
  <!-- ADDDED -->
<!--   <script src="https://code.jquery.com/jquery-3.1.1.js"></script> -->
  <script type="text/javascript" src="http://makecolorfulmusic.com/Spotify/TONE/Tone.js-master/examples/scripts/jquery.min.js"></script>
  <script type="text/javascript" src="http://makecolorfulmusic.com/Spotify/TONE/Tone.js-master/examples/scripts/Interface.js"></script>		
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.5.3/p5.js"></script>
  <script type="text/javascript" src="https://tonejs.github.io/CDN/r6/p5.Tone.min.js"></script>

  


<!-- 	<link rel="stylesheet" type="text/css" href="./style/examples.css">
 -->
	<script type="text/javascript">
		// jshint ignore: start
	</script>

</head>
<body>
	<div id="Content">
		<div id="Title">Events</div>
		<div id="Explanation">
			Tone's Event classes (<a href="http://tonejs.org/docs/#Event">Tone.Event</a>,
				<a href="http://tonejs.org/docs/#Loop">Tone.Loop</a>,
				<a href="http://tonejs.org/docs/#Part">Tone.Part</a> and
				<a href="http://tonejs.org/docs/#Sequence">Tone.Sequence</a>)
			simplify scheduling events along the Transport. Each class abstracts away calls to
				<a href="http://tonejs.org/docs/#Transport.schedule">Transport.schedule</a> or
				<a href="http://tonejs.org/docs/#Transport.scheduleRepeat">scheduleRepeat</a>
			and lets you create precise, rhythmic events which are startable, stoppable and loopable.
		</div>
	</div>
	
<li class="file"><a href="audio/BOLS/Ta.wav" >Ta.wav</a></li>
<li class="file"><a href="audio/BOLS/Re.wav" >Re.wav</a></li>
<li class="file"><a href="audio/BOLS/Tu.wav" >Tu.wav</a></li>
<li class="file"><a href="audio/BOLS/Ti.wav" >Ti.wav</a></li>
<li class="file"><a href="audio/BOLS/Ki.wav" >Ki.wav</a></li>
<li class="file"><a href="audio/BOLS/Tin.wav" >Tin.wav</a></li>
<li class="file"><a href="audio/BOLS/Na.wav" >Na.wav</a></li>
<li class="file"><a href="audio/BOLS/Te.wav" >Te.wav</a></li>	<script id="ToneCode" type="text/javascript">
		/*
		 KICK
		 */
		var kick = new Tone.DrumSynth({
			"envelope" : {
				"sustain" : 0,
				"attack" : 0.02,
				"decay" : 0.7
			},
			"octaves" : 7
		}).toMaster()

		/* var kickPart = new Tone.Loop(function(time){
			kick.triggerAttackRelease("C2", "8n", time);
		}, "2n").start(0);
		 */

		/*
		 SNARE
		 */
		var snare = new Tone.NoiseSynth({
			"volume" : -5,
			"envelope" : {
				"attack" : 0.001,
				"decay" : 0.2,
				"sustain" : 0
			},
			"filterEnvelope" : {
				"attack" : 0.001,
				"decay" : 0.1,
				"sustain" : 0
			}
		}).toMaster();
/*
		var snarePart = new Tone.Loop(function(time){
			snare.triggerAttack(time);
		}, "2n").start("4n"); */


		/**
		 *  PIANO
		 */

		var piano = new Tone.PolySynth(4, Tone.SimpleSynth, {
			"volume" : 1,
			"oscillator" : {
				"partials" : [1],
			},
			"portamento" : 0.05
		}).toMaster()

		var cChord = ["C2"];
		var dChord = ["D2"];
		var gChord = ["G2"];
/*
		var pianoPart = new Tone.Part(function(time, chord){
			piano.triggerAttackRelease(chord, "8n", time);
		}, [["0:1", cChord], ["0:1:3", dChord], ["0:2:2", gChord]]).start("1m");

		pianoPart.loop = true;
		pianoPart.loopEnd = "1m";
		pianoPart.humanize = false; */

		/**
		 *  CYNTHY
		 */
		var cynthy = new Tone.PolySynth(4, Tone.SimpleSynth, {
			"volume": 1,
			"oscillator" : {
				"partials" : [0,0,1],
			}
			//"portamento" : 0.05
		}).toMaster()
/*
		var cynthyPart = new Tone.Part(function(time, chord){
			cynthy.triggerAttackRelease(chord, "8n", time);
		}, [["0:3:1", cChord], ["0:3:2", dChord]]).start("1m");

		cynthyPart.loop = true;
		cynthyPart.loopEnd = "1m";
		cynthyPart.humanize = false; */

		/*
		 BASS
		 */
		var bass = new Tone.MonoSynth({
			"volume" : -30,
			"envelope" : {
				"attack" : 0.1,
				"decay" : 0.3,
				"release" : 2,
			},
			"filterEnvelope" : {
				"attack" : 0.001,
				"decay" : 0.01,
				"sustain" : 0.5,
				"baseFrequency" : 200,
				"octaves" : 2.6
			}
		}).toMaster();

		var bassPart = new Tone.Sequence(function(time, note){
			bass.triggerAttackRelease(note, "16n", time);
		}, ["C2", ["C3", ["C3", "D2"]], "E2", ["D2", "A1"]]);

//  		bassPart.start(0);

//		bassPart.probability = 0.9;


		var sampler = new Tone.Sampler({
		  "Ta": {
		    1: "audio/BOLS/Ta.wav"
		  },
		  "Tin": {
		    1: "audio/BOLS/Tin.wav"
		  },
		  "Tu": {
		    1: "audio/BOLS/Tu.wav"
		  },
		  "Na": {
		    1: "audio/BOLS/Na.wav"
		  },
		  "Ki": {
		  	1: "audio/BOLS/Ki.wav"
		  },
		  "Re": {
		  	1: "audio/BOLS/Re.wav"
		  },
		  "Ti": {
		  	1: "audio/BOLS/Ti.wav"
		  },
		  "Te": {
		  	1: "audio/BOLS/Te.wav"
		  }
		}).toMaster();

		var seq = new Tone.Sequence(function(time, note) {
//console.log(time);
		  console.log(note);
		  sampler.triggerAttackRelease(note, "8n", time, .5);
		  //subdivisions are given as subarrays
		}, [
			["Na.1"],
			["Tin.1", "Na.1"],
			["Tin.1"],
			["Ti.1", "Re.1", "Ki.1", "Ti.1"],
			["Ta.1", "Ki.1"],
			["Ta.1", "Ki.1"],
			["Ta.1", "Ki.1"],
			["Ti.1", "Ta.1"],
			["Ki.1", "Ti.1"],
			["Ta.1", "Ki.1"],
			[["Ti.1", "Re.1"], null, "Ki.1"],
			[null, "Ta.1", null],
		], "4n").start(0);

		//set the transport
		Tone.Transport.bpm.value = 120;


	</script>
	<script type="text/javascript">

		$(function(){

			new Interface.Button({
				key : 32,
				type : "toggle",
				text : "Start",
				activeText : "Stop",
				start : function(){
					Tone.Transport.start();
				},
				end : function(){
					Tone.Transport.stop();
				}
			});
		});
	</script>
</body>
</html>
